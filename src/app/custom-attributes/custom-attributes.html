<!-- customer-profile.html -->
<div class="container-fluid p-3">
  <div class="card shadow-sm border-0">
    <!-- Header -->
    <div
      class="card-header d-flex justify-content-between align-items-center text-white"
      style="background-color: #0b4f6c"
      (click)="toggleAttributes()"
    >
      <h5 class="mb-0">
        Custom Attributes
        <span style="font-size: smaller;">
          <i
            class="bi"
            [ngClass]="{ 'bi-chevron-down': !isExpanded, 'bi-chevron-up': isExpanded }"
          ></i>
        </span>
      </h5>
    </div>

    <!-- Body -->
    <div class="card-body p-0" *ngIf="isExpanded">
      @if (hasData) {
      <!-- Scroll wrapper -->
      <div class="table-responsive" style="max-height: 250px; overflow-y: auto;">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-light sticky-top">
            <tr>
              <th style="width: 30%;">Key</th>
              <th style="width: 70%;">Value</th>
            </tr>
          </thead>
          <tbody>
            @for (attr of attributes | keyvalue; track attr.key) {
            <tr>
              <td><strong>{{ attr.key }}</strong></td>
              <td class="text-break">{{ attr.value?.value || attr.value }}</td>
            </tr>
            }
          </tbody>
        </table>
      </div>
      } @else {
        
      <div class="text-center p-3">
          <p class="text-muted">No attributes available yet. Waiting for call...</p>
        </div>
      }
    </div>
  </div>
</div>
